(()=>{"use strict";var t,n={875:(t,n,e)=>{var i,r=e(753);class a{static getChunkName(){return""}static getChunk(){return""}static getDefines(){return{}}static registerChunk(){r.vxI&&null==r.vxI[this.getChunkName()]&&(r.vxI[this.getChunkName()]=this.getChunk())}static getUniform(){return{}}}class o extends a{static registerChunk(){s.registerChunk(),l.registerChunk(),u.registerChunk(),d.registerChunk()}static getUniform(){return r.LlO.merge([r.fCn.sprite,r.fCn.fog,r.fCn.lights])}}class s extends a{static getChunkName(){return"sprite_vertex_uniform_chunk"}static getChunk(){return"\n      uniform float rotation;\n      uniform vec2 center;\n    "}}class l extends a{static getChunkName(){return"sprite_fragment_uniform_chunk"}static getChunk(){return"\n      uniform vec3 diffuse;\n      uniform float opacity;\n    "}}class u extends a{static getChunkName(){return"sprite_diffuse_color_chunk"}static getChunk(){return"\n      vec3 outgoingLight = vec3( 0.0 );\n      vec4 diffuseColor = vec4( diffuse, opacity );\n    "}}class d extends a{static getChunkName(){return"sprite_mv_position_chunk"}static getChunk(){return"\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n    "}}!function(t){t[t.vertical=4]="vertical",t[t.horizontal=3]="horizontal",t[t.radial=5]="radial"}(i||(i={})),r.BKk;class c extends r.BKk{constructor(t,n,e){super(e),this.sizeAttenuation=!0,this._opacity=1,e??={},t??="\n#include <sprite_vertex_uniform_chunk>\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\t#include <uv_vertex>\n\t#include <sprite_mv_position_chunk>\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",n??="\n#include <sprite_fragment_uniform_chunk>\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\n}",this.initChunks(),this.initUniforms(),this.initDefines(),this.vertexShader=t,this.fragmentShader=n,this.initDefaultSetting(e)}initChunks(){o.registerChunk()}initUniforms(){this.uniforms=r.LlO.merge([o.getUniform(),{uvTransform:{value:new r.dwI}}])}initDefines(){this.defines=Object.assign({},o.getDefines(),this.defines)}initDefaultSetting(t){this.uniformOpacity=this._opacity}get opacity(){return this._opacity}get uniformOpacity(){return this._opacity}set opacity(t){this.uniformOpacity=t}set uniformOpacity(t){this._opacity=t,this.uniforms?.opacity&&(this.uniforms.opacity.value=t)}get color(){return this.uniforms.diffuse.value}set color(t){this.uniforms.diffuse.value=t}get center(){return this.uniforms.center.value}set center(t){this.uniforms.center.value=t}get rotation(){return this.uniforms.rotation.value}set rotation(t){this.uniforms.rotation.value=t}get uvTransform(){return this.uniforms.uvTransform.value}set uvTransform(t){this.uniforms.uvTransform.value=t}get map(){return this.uniforms.map.value}set map(t){this.uniforms.map.value=t}get alphaMap(){return this.uniforms.alphaMap.value}set alphaMap(t){this.uniforms.alphaMap.value=t}}r.BKk,r.BKk;var m=e(293);m.zE5;var f=e(603);(0,m.Fn)((([t,n,e,i,r,a])=>g(t,n,e,i,r,a,(0,m.eR5)(0,0,1))));const g=(0,m.Fn)((([t,n,e,i,r,a,o])=>{const s=(0,m.eR5)(0,0,0).toVar(),l=(0,m.T9B)(0,m.ono.dot((0,m.eR5)(o))),u=(0,m.jbE)(1,l);u.assign((0,m.n7C)(u,n)),s.rgb.addAssign(t.mul(u.mul(e)));const d=(0,m.n7C)(l,r);return s.rgb.addAssign(i.mul(d.mul(a))),s}));m.P8l;class p extends c{constructor(t){super(null,"\n\nuniform float rimStrength;\nuniform float bottomStrength;\nuniform vec3 rimColor;\nuniform vec3 skyColor;\n\nuniform float rimCenter;\nuniform float rimRange;\n#include <sprite_fragment_uniform_chunk>\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n  vec3 color = diffuse;\n  #include <clipping_planes_fragment>\n  #include <sprite_diffuse_color_chunk>\n\t#include <logdepthbuf_fragment>\n\t\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\t\n\tfloat bottom = 0.0;\t\n  \n\t#ifdef USE_MAP\n    bottom = 1.0 - texture2D( map, vUv ).g;\n    bottom *= bottomStrength;\n  #endif\n    \n  float edge = 0.0;\n  #ifdef USE_MAP\n    float a = texture2D( map, vUv ).a ;\n    edge = \n        smoothstep( rimCenter-rimRange, rimCenter, a )\n      - smoothstep( rimCenter, rimCenter+rimRange, a );\n  #endif\n    \n  outgoingLight = mix( diffuse, skyColor, bottom);\n  outgoingLight += rimColor * edge * rimStrength;\n\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\n}",t)}initUniforms(){super.initUniforms(),this.uniforms=r.LlO.merge([this.uniforms,{rimStrength:{value:.2},bottomStrength:{value:.75},rimColor:{value:new r.Q1f(16777215)},skyColor:{value:new r.Q1f(13421772)},rimCenter:{value:.6},rimRange:{value:.15}}])}initDefines(){this.defines=Object.assign({USE_UV:!0},o.getDefines(),this.defines)}initDefaultSetting(t){super.initDefaultSetting(t)}get rimCenter(){return this.uniforms.rimCenter.value}set rimCenter(t){this.uniforms.rimCenter.value=t}get rimRange(){return this.uniforms.rimRange.value}set rimRange(t){this.uniforms.rimRange.value=t}get rimStrength(){return this.uniforms.rimStrength.value}set rimStrength(t){this.uniforms.rimStrength.value=t}get bottomStrength(){return this.uniforms.bottomStrength.value}set bottomStrength(t){this.uniforms.bottomStrength.value=t}get rimColor(){return this.uniforms.rimColor.value}set rimColor(t){this.uniforms.rimColor.value=t}get skyColor(){return this.uniforms.skyColor.value}set skyColor(t){this.uniforms.skyColor.value=t}}class h{static initColorGUI(t,n,e="color"){const i={},r=n[e];return i[e]=r.getHex(),t.addColor(i,e).onChange((t=>{r.setHex(t)})),i}static initColorNodeGUI(t,n,e="color"){const i={},r=n[e];return i[e]=r.value.getHex(),t.addColor(i,e).onChange((t=>{r.value.setHex(t)})),i}static initBasicMaterialGUI(t,n,e="Material"){const i=t.addFolder(e);return this.initMaterialFolder(i,n),i.open(),i}static initMaterialGUI(t,n,e="Material"){const i=this.initBasicMaterialGUI(t,n,e);this.initColorGUI(i,n,"emissive")}static initMaterialFolder(t,n,e=!1){this.initColorGUI(t,n),t.add(n,"transparent");const i=e?"opacity":"uniformOpacity";t.add(n,i,0,1)}static initSpriteMaterialGUI(t,n,e="Material"){const i=t.addFolder(e);this.initMaterialFolder(i,n),i.open()}static initGridMaterialGUI(t,n){this.initMaterialGUI(t,n);const e={mask:"",alphaMap:""},i=t.addFolder("WavyGridMaterial");return i.add(n,"isReversed"),i.add(n,"division",2,256).step(1),i.add(n,"divisionScaleX",0,4).step(1),i.add(e,"mask",{none:"",earth:"./textures/landmask.png"}).onChange((t=>{n.maskTexture=""===t?null:(new r.Tap).load(t)})),i.add(e,"alphaMap",{none:"",earth:"./textures/landmask.png"}).onChange((t=>{n.alphaMap=""===t?null:(new r.Tap).load(t)})),i.open(),i}static initWavyMaterialGUI(t,n){const e=this.initGridMaterialGUI(t,n).addFolder("WavyAnimation");e.add(n,"isAnimate"),e.add(n,"speed",-2,2),e.add(n,"waveFrequency",0,1),e.add(n,"wavePow",0,4),e.add(n,"direction",{horizontal:i.horizontal,vertical:i.vertical,radial:i.radial}),e.add(n,"raisedBottom",0,1),e.open()}static initAnimationGUI(t,n,e="Animation"){const i=t.addFolder(e);i.add(n,"isAnimate"),i.add(n,"speed",-2,2),i.open()}static initRimGUI(t,n,e="Rim Effect Material"){const i=t.addFolder(e);h.initColorGUI(i,n,"rimColor"),i.add(n,"rimStrength",0,4).step(.01),i.add(n,"rimPow",0,4).step(.01),h.initColorGUI(i,n,"insideColor"),i.add(n,"insideStrength",0,4).step(.01),i.add(n,"insidePow",0,8).step(.01),i.open()}static initExpansionGUI(t,n,e="ExpansionMaterial"){const i=t.addFolder("ExpansionMaterial");i.add(n,"expansionStrength",-12,12).step(.01),i.open()}static initFBMTilingGUI(t,n,e="FBM Tiling"){const i=t.addFolder("FBM Tiling");i.add(n,"tiles",1,8).step(1),i.add(n,"hashLoop",2,16).step(1),i.add(n,"amp",0,2).step(.01),i.open()}static initSkyGUI(t,n,e,i){const r={turbidity:10,rayleigh:.15,mieCoefficient:.005,mieDirectionalG:.8,inclination:.07,azimuth:.25,exposure:.75},a=4e5;function o(){const t=n.material.uniforms;t.turbidity.value=r.turbidity,t.rayleigh.value=r.rayleigh,t.mieCoefficient.value=r.mieCoefficient,t.mieDirectionalG.value=r.mieDirectionalG;const o=Math.PI*(r.inclination-.5),s=2*Math.PI*(r.azimuth-.5);e.position.x=a*Math.cos(s),e.position.y=a*Math.sin(s)*Math.sin(o),e.position.z=a*Math.sin(s)*Math.cos(o),t.sunPosition.value.copy(e.position),i.toneMappingExposure=r.exposure}o();const s=t.addFolder("Sky");s.add(r,"turbidity",1,20,.1).onChange(o),s.add(r,"rayleigh",0,4,.001).onChange(o),s.add(r,"mieCoefficient",0,.1,.001).onChange(o),s.add(r,"mieDirectionalG",0,1,.001).onChange(o),s.add(r,"inclination",0,1,1e-4).onChange(o),s.add(r,"azimuth",0,1,1e-4).onChange(o),s.add(r,"exposure",0,1,1e-4).onChange(o),s.open()}}var v=e(580),_=e(785);class C{static initScene(){return new r.Z58}static initLight(t){const n=new r.$p8(16777215,Math.PI);return t.add(n),n}static initCamera(t,n,e,i=400){const a=new r.ubm(45,n/e,1,i);return a.position.set(0,0,100),a.updateMatrixWorld(!1),t.add(a),a}static initControl(t,n){let e;null!=n&&(e=n.domElement);const i=new v.N(t,e);return i.update(),i}static initRenderer(t,n,e=0,i=!0){const a=new r.JeP({antialias:i});return a.setClearColor(new r.Q1f(e)),a.setSize(t,n),a.setPixelRatio(window.devicePixelRatio),a.domElement.style.backgroundColor="#"+e.toString(16).padStart(6,"0"),document.body.appendChild(a.domElement),console.log("three.js revision: ",r.sPf),a}static initHelper(t){const n=new r.IzY(30);t.add(n)}static initSky(t,n,e){e.toneMapping=r.FV;const i=new r.eaF(new r.Gu$(2e4,16,8),new r.V9B({color:16777215}));i.position.y=-7e5,i.visible=!1,t.add(i);const a=new _.m;a.scale.setScalar(45e3),t.add(a),h.initSkyGUI(n,a,i,e)}}var x=e(638);class k{constructor(){const t=C.initScene();t.fog=new r.jUj(5601177,300,600),C.initLight(t);const n=C.initCamera(t,640,480),e=C.initRenderer(640,480);C.initControl(n,e),C.initHelper(t);const i=this.initObject(t),a=new x.Ay;C.initSky(t,a,e),this.initGUI(a,i),f.w.on("tick",(i=>{e.render(t,n)}))}initObject(t){const n=new p({fog:void 0!==t.fog,transparent:!0});n.color=new r.Q1f(14540253);const e=new r.Tap;n.map=e.load("./textures/cloud.png"),n.skyColor=new r.Q1f(10070715),n.rimColor=new r.Q1f(16777215);const i=new r.kxk(n);return i.scale.set(40,40,1),i.position.x=0,t.add(i),n}initGUI(t,n){h.initSpriteMaterialGUI(t,n);const e=t.addFolder("SpriteCloud");h.initColorGUI(e,n,"skyColor"),e.add(n,"bottomStrength",0,5),h.initColorGUI(e,n,"rimColor"),e.add(n,"rimStrength",0,5),e.add(n,"rimCenter",0,1),e.add(n,"rimRange",0,1),e.open()}}window.onload=()=>{new k}}},e={};function i(t){var r=e[t];if(void 0!==r)return r.exports;var a=e[t]={exports:{}};return n[t](a,a.exports,i),a.exports}i.m=n,t=[],i.O=(n,e,r,a)=>{if(!e){var o=1/0;for(d=0;d<t.length;d++){for(var[e,r,a]=t[d],s=!0,l=0;l<e.length;l++)(!1&a||o>=a)&&Object.keys(i.O).every((t=>i.O[t](e[l])))?e.splice(l--,1):(s=!1,a<o&&(o=a));if(s){t.splice(d--,1);var u=r();void 0!==u&&(n=u)}}return n}a=a||0;for(var d=t.length;d>0&&t[d-1][2]>a;d--)t[d]=t[d-1];t[d]=[e,r,a]},i.d=(t,n)=>{for(var e in n)i.o(n,e)&&!i.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},i.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),i.j=372,(()=>{var t={372:0};i.O.j=n=>0===t[n];var n=(n,e)=>{var r,a,[o,s,l]=e,u=0;if(o.some((n=>0!==t[n]))){for(r in s)i.o(s,r)&&(i.m[r]=s[r]);if(l)var d=l(i)}for(n&&n(e);u<o.length;u++)a=o[u],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return i.O(d)},e=self.webpackChunk_masatomakino_threejs_shader_materials=self.webpackChunk_masatomakino_threejs_shader_materials||[];e.forEach(n.bind(null,0)),e.push=n.bind(null,e.push.bind(e))})();var r=i.O(void 0,[121],(()=>i(875)));r=i.O(r)})();